# TIL Scrub Results - 2025-11-29

Scanned ~/dev/**/docs/sessions for recent session files. Found **6 potential TILs** from sessions dated 2025-11-26 through 2025-11-29.

---

## Potential TILs

### 1. CodeMirror Keymap Priority

**Category:** `javascript` (new)
**Filename:** `codemirror-keymap-priority.md`
**Source:** `undertow_standalone/docs/sessions/2025-11-29-ctrl-enter-and-comments.md`

**Summary:** CodeMirror 6's `defaultKeymap` includes `Mod-Enter` for `insertBlankLine`. On Linux, this consumes Ctrl+Enter before custom keymaps can handle it. Solution: place custom keymaps FIRST in the extensions array to give them highest priority.

```javascript
// Wrong - custom keymap processed after defaultKeymap
const extensions = [lineNumbers(), keymap.of([...defaultKeymap]), createEvalKeymap()];

// Right - custom keymap has highest priority
const extensions = [createEvalKeymap(), lineNumbers(), keymap.of([...defaultKeymap])];
```

---

### 2. Procedural Impulse Response Generation

**Category:** `javascript` (new) or `web-audio`
**Filename:** `procedural-reverb-impulse-response.md`
**Source:** `waveform_js/docs/sessions/2025-11-27-phase4-effects.md`

**Summary:** Generate reverb impulse responses procedurally instead of loading audio files. Uses exponential decay envelope applied to noise. No external dependencies, works offline, instant availability.

```javascript
for (let i = 0; i < length; i++) {
  const t = i / sampleRate;
  const envelope = Math.exp(-decay * t);
  leftChannel[i] = (Math.random() * 2 - 1) * envelope;
  rightChannel[i] = (Math.random() * 2 - 1) * envelope;
}
```

---

### 3. WSL2 Symlinks to Windows Files

**Category:** `wsl2`
**Filename:** `symlink-to-windows-filesystem.md`
**Source:** `devprompt-hub/docs/sessions/SESSION-2025-11-27-pivot-to-ctx.md`

**Summary:** Create symlinks from WSL2 to Windows filesystem for cross-platform file sharing. Useful for Obsidian vault integration where Obsidian runs on Windows but development happens in WSL2.

```bash
# Create file on Windows from WSL
echo "content" > /mnt/c/Users/rpmes/ObsidianVault/context.md

# Symlink from WSL project to Windows file
ln -s /mnt/c/Users/rpmes/ObsidianVault/context.md ~/dev/project/CLAUDE.md

# Reading works through the symlink
cat ~/dev/project/CLAUDE.md  # Works!
```

---

### 4. NimbleParsec Comment Skipping

**Category:** `elixir`
**Filename:** `nimbleparsec-skip-comments.md`
**Source:** `undertow_standalone/docs/sessions/2025-11-29-ctrl-enter-and-comments.md`

**Summary:** When building parsers with NimbleParsec, use `repeat` with `choice` to skip both whitespace and comments before parsing significant tokens.

```elixir
block_comment =
  string("/*")
  |> repeat(lookahead_not(string("*/")) |> utf8_char([]))
  |> string("*/")

skip_ws_and_comments =
  repeat(
    choice([
      ascii_string([?\s, ?\t, ?\n, ?\r], min: 1),
      line_comment,
      block_comment
    ])
  )
```

---

### 5. Bjorklund's Algorithm for Euclidean Rhythms

**Category:** `elixir` or `algorithms`
**Filename:** `bjorklund-euclidean-rhythm.md`
**Source:** `uzu_parser/docs/sessions/2025-11-26-phase-3-5-implementation.md`

**Summary:** Bjorklund's algorithm distributes k hits evenly across n steps, creating Euclidean rhythms. Used in TidalCycles/Strudel for patterns like `bd(3,8)` (3 hits over 8 steps).

```elixir
defp bjorklund(k, n) when k >= n, do: List.duplicate(1, n)
defp bjorklund(k, n) do
  left = List.duplicate([1], k)
  right = List.duplicate([0], n - k)
  bjorklund_iterate(left, right)
end

defp bjorklund_iterate(left, []), do: List.flatten(left)
defp bjorklund_iterate(left, right) when length(right) <= 1, do: List.flatten(left ++ right)
defp bjorklund_iterate(left, right) do
  {combined, remainder} = Enum.zip_reduce(left, right, {[], []}, fn l, r, {c, _} ->
    {[l ++ r | c], []}
  end)
  # ... continues recursively
end
```

---

### 6. Web Audio Effects Chain Order

**Category:** `javascript` or `web-audio`
**Filename:** `web-audio-effects-chain-order.md`
**Source:** `waveform_js/docs/sessions/2025-11-27-phase4-effects.md`

**Summary:** The order of audio effects significantly impacts the sound. Standard guitar pedal order works well: Filter (shape tone) -> Distortion (add harmonics) -> Delay (echo processed sound) -> Reverb (add space last, most CPU-intensive).

---

## Already Covered

The following topics from sessions are already covered by existing TILs:

- OSC bundles with timestamps (`osc/osc-bundles-with-timestamps.md`)
- Event-driven waiting patterns (`elixir/event-driven-waiting-pattern.md`)
- WSL2 clipboard with clip.exe (`wsl2/clip-exe-for-clipboard.md`)

---

## Recommendations

**High Value (publish soon):**
1. CodeMirror Keymap Priority - common gotcha
2. WSL2 Symlinks to Windows - practical for hybrid workflows
3. Bjorklund's Algorithm - educational, reusable

**Medium Value:**
4. Procedural IR Generation - niche but interesting
5. NimbleParsec Comment Skipping - useful for parser authors
6. Web Audio Effects Order - brief but useful reference
